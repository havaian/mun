# Техническое задание на разработку платформы [mun.uz](http://mun.uz) (MVP) 

## 1. Общие сведения

### 1.1 Наименование системы

Веб-платформа для организации и проведения моделей ООН "[mun.uz](http://mun.uz)"

### 1.2 Назначение и цели создания системы

Система предназначена для полной автоматизации проведения оффлайн мероприятий моделей ООН, включая управление ролями участников, процессом создания коалиций и резолюций, системой голосований, поправок, статистикой и дипломатической перепиской.

### 1.3 MVP приоритеты

* ✅ **Киллер-фичи**: Полная система управления сессиями, коалиции и резолюции, голосование с поправками, статистика для ачивок
* ✅ **Базовая функциональность**: QR-аутентификация, real-time обновления, дипломатическая переписка
* ❌ **Отложено на v2**: Мобильное приложение, расширенная аналитика, интеграции

## 2. Архитектура системы

### 2.1 Тип архитектуры

Микросервисная архитектура frontend / backend

### 2.2 Технологический стек

* **Бэкенд**: Node.js 20+, Express, MongoDB 6+
* **Фронтенд**: Vue.js 3, Tailwind CSS
* **Real-time**: [Socket.io](http://Socket.io)
* **Дополнительные библиотеки**:
  * QR-код генерация: qrcode.js
  * Валидация данных: Joi
  * Аутентификация: JWT
  * CSV/PDF экспорт: json2csv, PDFKit
  * Хеширование: bcryptjs

### 2.3 Структура backend (применительно для каждого модуля)

```
backend/src
├── auth/          # Аутентификация QR + админ логин
├── auth/controller.js     # Файл с контроллерами
├── auth/model.js          # Файл с моделью
├── auth/routes.js         # Файл с роутами
├── event/         # Управление мероприятиями
├── committee/     # Комитеты, страны, роли участников
├── session/       # Сессии и режимы дебатов
├── voting/        # Система голосований
├── resolution/    # Коалиции, резолюции, поправки
├── document/      # Позиционные письма и публичные документы
├── messaging/     # Дипломатическая переписка и gossip
├── statistics/    # Статистика и рейтинг
├── timer/         # Система таймеров
├── procedure/     # Процедурные предложения и вопросы
├── presentation/  # Публичный дисплей
├── websocket/     # Real-time обновления
└── export/        # Экспорт данных
```

### 2.4 Масштабируемость

Система должна поддерживать одновременную работу до **500 активных пользователей** без существенного снижения производительности.

## 3. Детальная логика системы ролей и доступов

### 3.1 Иерархия ролей и их детальные права

#### 3.1.1 Администратор

**Полный контроль над системой:**

* **Создание мероприятий**: формирование базовой структуры как контейнера для комитетов
* **Управление комитетами**: создание комитетов с назначением президиумов 
* **Временные рамки**: установление периодов, в течение которых президиум может вносить изменения
* **Глобальные настройки**: управление языковыми настройками, правилами безопасности
* **Реактивация доступов**: восстановление QR-токенов при компрометации или технических проблемах

#### 3.1.2 Президиум комитета (4 равноправные роли)

**Структура президиума:**

* **Председатель**: ведет заседания, принимает окончательные процедурные решения
* **Сопредседатель**: может полностью замещать председателя при необходимости
* **Эксперт**: специализируется на оценке документов на соответствие международному праву
* **Секретарь**: ведет протоколы, помогает в административных вопросах
  
  Можно сделать как из отдельных акков, так и одного на всех 

**Равные права всех членов президиума:**

* **Управление составом**: добавление стран-участниц из предзагруженного списка (только в рамках временных ограничений администратора)
* **Настройка параметров**: установление минимального количества соавторов для коалиций, дедлайнов подачи документов, типов голосований
* **Модерация документов**: рассмотрение и принятие решений по резолюциям, поправкам, позиционным письмам
* **Управление сессиями**: переключение режимов дебатов, управление таймерами, проведение голосований
* **Создание комиссий**: формирование согласительных комиссий при необходимости

#### 3.1.3 Делегаты по категориям

**Страны-участницы (полные права):**

* Предзагружены в систему с официальными названиями и государственными флагами
* **Уникальность**: одна страна не может участвовать дважды в одном комитете
* **Мульти-комитетность**: одна страна может участвовать в нескольких комитетах одного мероприятия
* **Полные права**: голосование, создание коалиций, авторство резолюций, подача поправок, процедурные предложения

**Наблюдатели:**

* Статус без права голоса, но с правом участия в дебатах
* Могут подавать процедурные предложения
* Участвуют в дипломатической переписке
* **Ограничения**: НЕ могут голосовать, создавать резолюции, подавать поправки

**Специальные роли:**

* Названия определяются произвольно президиумом (например, "Представитель гражданского общества")
* **Максимальные ограничения**: только участие в дебатах и дипломатической переписке
* **Запреты**: голосование, резолюции, поправки, большинство процедурных действий

### 3.2 Правила контроля доступа и временных ограничений

#### 3.2.1 Система временных ограничений

* **Администратор устанавливает**: период регистрации участников комитета
* **Автоматическая блокировка**: по истечении времени функции добавления стран отключаются
* **Реактивация**: только администратор может вручную разблокировать добавление участников
* **Контроль уникальности**: система автоматически проверяет дублирование стран в рамках комитета

## 4. Детальная логика системы аутентификации

### 4.1 Механизм QR-кодов и первичной авторизации

#### 4.1.1 Процесс генерации доступов

**Автоматическая генерация после закрытия регистрации:**


1. **PDF-файл для каждого комитета** содержит:
   * QR-код для каждой страны с уникальным JWT токеном
   * Название страны с официальным государственным флагом
   * Информацию о комитете и мероприятии
2. **Параллельная генерация прямых ссылок** с теми же токенами для альтернативного доступа

#### 4.1.2 Логика первичной авторизации

**Пошаговый процесс:**


1. **Сканирование QR-кода или переход по ссылке** предоставляет одноразовый доступ к панели делегата
2. **Ввод email-адреса** при первом входе - пользователь указывает свой email, который навсегда привязывается к стране
3. **Автоматическая деактивация** - после привязки email все одноразовые доступы (QR, ссылка, токен) утрачивают силу
4. **Последующий доступ** возможен только через привязанный email

#### 4.1.3 Система безопасности и реактивации

**Защита от несанкционированного доступа:**

* Даже если QR-код попадет в чужие руки после первичной активации, воспользоваться им невозможно
* **Только одна активная сессия** на пользователя (кроме администратора)
* Новый логин автоматически завершает предыдущую сессию

**Реактивация токенов:**

* Президиум может реактивировать QR-код и связанные ссылки для конкретной страны
* Используется при технических проблемах или компрометации аккаунта
* Все действия реактивации логируются с указанием причины

## 5. Детальная логика системы управления документами

### 5.1 Система позиционных писем делегатов

#### 5.1.1 Процесс загрузки и модерации

**Загрузка делегатами:**

* **После входа** и привязки email делегат может загрузить позиционное письмо
* **Форматы**: PDF или Word документы
* **Дедлайн**: устанавливается президиумом для всего комитета
* **Версионность**: возможность загрузки множественных версий до дедлайна. После одобрения или истечения дедлайна загрузить новую версию невозможно.

**Модерация президиумом:**

* **Принять**: документ одобрен без замечаний
* **Отправить на доработку**: с развернутыми комментариями
* **Особое правило**: если документ отправлен на доработку, новая версия может быть загружена даже после истечения дедлайна

#### 5.1.2 Система версионирования

* Каждая загрузка создает новую версию документа
* Сохраняется история всех версий с временными метками
* Президиум видит все версии и может сравнивать изменения
* Делегат получает уведомления о статусе модерации каждой версии

### 5.2 Система публичных документов

#### 5.2.1 Управление справочными материалами

**Загрузка президиумом:**

* Во время настройки комитета президиум может загрузить публичные документы
* **Типы документов**: справочные материалы, правила процедуры, карты, исторические данные, статистика

**Доступ делегатов:**

* Все загруженные документы доступны делегатам в любое время
* Специальный раздел в интерфейсе для просмотра справочных материалов
* Возможность скачивания для автономного изучения

## 6. Детальная логика системы коалиций и резолюций

### 6.1 Процесс создания и управления коалициями

#### 6.1.1 Инициация коалиции

**Правила создания:**

* **Инициатор**: любая страна-участница может стать инициатором
* **Автоматическое лидерство**: инициатор автоматически становится главой коалиции
* **Ответственность главы**: координация работы всей коалиции и окончательная подача драфта резолюции

#### 6.1.2 Система приглашений и подтверждений

**Процесс формирования состава:**


1. **Выбор соавторов**: глава коалиции выбирает страны для приглашения из списка участников комитета
2. **Минимальные требования**: количество приглашенных должно соответствовать или превышать минимум, установленный президиумом
3. **Отправка приглашений**: выбранные страны получают уведомления через систему
4. **Процесс подтверждения**: каждая приглашенная страна может принять или отклонить приглашение
5. **Эксклюзивность**: страна, принявшая одно приглашение, не может принять другие до отзыва своего согласия

#### 6.1.3 Активация коалиции и правила участия

**Условия активации:**

* **Вариант 1**: получение подтверждений от ВСЕХ приглашенных стран
* **Вариант 2**: набор минимального количества соавторов по решению главы коалиции. Глава коалиции в этом случае самостоятельно принимает решение об активации. Все остальные приглашения остаются в силе, новые приглашения отправлять запрещено.

**Правила эксклюзивности:**

* **Одна коалиция на страну**: страна может быть автором только одной резолюции
* **Блокировка создания**: став соавтором в одной коалиции, страна не может создать собственную
* **Отзыв согласия**: возможен только до истечения дедлайна подачи резолюции

### 6.2 Система резолюций и их обработки

#### 6.2.1 Условия и процесс загрузки драфтов

**Ограничения загрузки:**

* **Авторизация**: драфт может загрузить только глава активной коалиции
* **Временные рамки**: только когда президиум включил режим загрузки драфтов
* **Дедлайн**: до установленного президиумом времени окончания приема документов
* **Неизменность**: после загрузки драфт не может быть изменен

**Правила версионирования:**

* При необходимости исправлений загружается новая версия
* Сохраняется полная история изменений с временными метками
* Каждая версия рассматривается президиумом как отдельный документ

#### 6.2.2 Система модерации президиумом

**Три типа решений по драфтам:**


1. **Принять драфт к голосованию без замечаний**
   * Документ допускается к голосованию в том виде, в котором подан
   * Никаких изменений не требуется
2. **Отклонить с правом подачи новой версии только до дедлайна**
   * Документ требует доработки
   * Новая версия может быть подана только в рамках установленного дедлайна
   * Обязательное предоставление подробных комментариев с обоснованием
3. **Отклонить с правом доработки, позволяющим подачу даже после дедлайна**
   * Документ имеет потенциал, но требует существенных изменений
   * Коалиции предоставляется дополнительное время для доработки
   * Обязательные развернутые комментарии с конкретными рекомендациями

#### 6.2.3 Особые полномочия президиума

**Исключительные права:**

* **Снятие с голосования**: президиум может исключить любой драфт по собственному усмотрению
* **Принятие без голосования**: назначение драфта рабочим документом минуя процедуру голосования
* **Президиумский драфт**: загрузка собственной резолюции от имени президиума
* **Назначение соавторов**: указание любых стран соавторами президиумской резолюции
* **Обязательное логирование**: все исключительные действия фиксируются с указанием причин

### 6.3 Система голосования по резолюциям

#### 6.3.1 Порядок и правила голосования

**Строгая очередность:**

* Резолюции выносятся на голосование в порядке времени подачи - от самой ранней к самой поздней
* Каждая резолюция голосуется отдельно до получения окончательного результата

**Условия принятия:**

* **Требование**: простое большинство (50% + 1 от присутствующих делегатов)
* **Завершение процесса**: при принятии любой резолюции голосование по остальным прекращается
* В Совете безопасности большинство голосов 9/15, с учетом права ВЕТО (5 стран постоянных участниц)

### 6.4 Система согласительной комиссии

#### 6.4.1 Условия активации и формирование состава

**Автоматическая активация:**

* Запускается, если ни один из представленных драфтов не получает большинства голосов
* Является обязательным механизмом предотвращения тупиковых ситуаций

**Формирование состава:**

* **Отбор членов**: президиум выбирает участников из числа делегатов комитета
* **Назначение председателя**: президиум назначает председателя комиссии из числа ее членов
* **Изоляция работы**: во время работы комиссии остальные участники комитета не могут находиться в зале

#### 6.4.2 Процесс работы комиссии

**Разработка документа:**

* Комиссия создает новый рабочий проект "с чистого листа"
* Использование стандартной системы редактирования документов платформы
* Полная свобода в определении содержания и структуры

**Временные ограничения:**

* **Базовое время**: 60 минут на работу комиссии
* **Продления**: возможны по решению председателя при необходимости достижения консенсуса

**Подача результата:**

* Председатель комиссии загружает готовый документ в систему
* Документ автоматически выносится на голосование всего комитета
* Обсуждение не предусмотрено - сразу переход к голосованию

#### 6.4.3 Механизм повторных попыток

**Итеративный процесс:**

* При отклонении документа согласительной комиссии формируется новая комиссия
* Обязательное изменение состава участников для получения нового взгляда на проблему
* Ограниченное количество попыток во избежание бесконечного цикла
* После исчерпания попыток комитет может принять решение о завершении работы без резолюции

## 7. Детальная логика системы поправок

### 7.1 Концепция и структура поправок

#### 7.1.1 Определение и классификация поправок

**Основное определение:** Поправка - это предложение изменить, дополнить или удалить конкретный пункт принятой рабочей резолюции. Каждая поправка привязана к определенному пункту документа.

**Три типа действий:**


1. **Исключение (Deletion)**
   * Полное удаление существующего пункта резолюции
   * Указывается только номер пункта для удаления
   * Последующие пункты автоматически перенумеровываются
2. **Изменение (Modification)**
   * Модификация текста существующего пункта
   * Указывается номер пункта и новый текст взамен существующего
   * Может быть частичным или полным изменением
3. **Добавление (Addition)**
   * Вставка нового пункта в документ
   * Указывается номер существующего пункта, после которого добавляется новый
   * Все последующие пункты автоматически перенумеровываются

#### 7.1.2 Правила авторства поправок

**Ограничения на подачу:**

* **Лимит на пункт**: делегат может подать только одну поправку к каждому пункту документа
* **Общее количество**: неограниченное количество поправок от одного делегата (к разным пунктам)
* **Соавторство**: возможно с неограниченным количеством соавторов
* **Подтверждение соавторства**: через систему уведомлений, аналогично коалициям

### 7.2 Процесс создания и подачи поправок

#### 7.2.1 Интерфейс и процедура создания

**Пошаговый процесс:**


1. **Выбор целевого пункта**: указание номера существующего пункта или позиции для нового пункта
2. **Определение типа действия**: выбор между исключением, изменением или добавлением
3. **Ввод содержания**: формулировка текста поправки с возможностью предварительного просмотра
4. **Приглашение соавторов**: опциональный выбор других делегатов для участия в авторстве

**Временные ограничения:**

* Поправки принимаются только в период, активированный президиумом
* После подачи поправка не может быть изменена или отозвана автором
* Дедлайн подачи устанавливается президиумом независимо от дедлайна резолюций

#### 7.2.2 Система подтверждения соавторства

**Процесс приглашения соавторов:**

* Автор поправки выбирает потенциальных соавторов из списка участников
* Приглашенные делегаты получают уведомления через систему
* Каждый приглашенный может принять или отклонить участие
* Принятие соавторства не блокирует участие в других поправках (в отличие от резолюций)

### 7.3 Система рассмотрения и голосования по поправкам

#### 7.3.1 Экспертная оценка президиумом

**Три варианта решения по каждой поправке:**


1. **Принять поправку в первоначальном виде для голосования**
   * Поправка допускается к голосованию без изменений
   * Считается полностью соответствующей требованиям
2. **Принять с минорными техническими исправлениями для голосования**
   * Президиум вносит незначительные правки (орфография, стилистика, терминология)
   * Содержательная суть поправки остается неизменной
   * Автор уведомляется об исправлениях
3. **Отклонить с развернутыми комментариями и не допустить к голосованию**
   * Поправка не соответствует требованиям или противоречит правилам
   * Обязательные подробные комментарии с объяснением причин отклонения
   * Возможность подачи новой поправки к тому же пункту отсутствует

#### 7.3.2 Система приоритизации и порядка рассмотрения

**Автоматическая сортировка поправок:**


1. **По частям документа:**
   * Сначала поправки к оперативной части (по возрастанию номеров пунктов)
   * Затем поправки к преамбуле (по возрастанию номеров пунктов)
   * В последнюю очередь новые пункты (по позиции вставки)
2. **При множественных поправках к одному пункту:**

   
   * Президиум самостоятельно определяет очередность.
   * Приоритет отдается наиболее радикальным изменениям (по усмотрению президиума)
   * Сначала поправки на исключение пункта
   * Затем поправки на полное изменение содержания
   * В конце поправки на частичные изменения
   * После первой принятой поправки остальные снимаются с голосования

**Правила голосования:**

* Каждая поправка рассматривается и голосуется отдельно
* Принятые поправки немедленно интегрируются в рабочий проект резолюции
* Последующие поправки к тому же пункту автоматически корректируются с учетом изменений

#### 7.3.3 Система поправок второго порядка

**Концепция и применение:**

* **Инициатор**: только президиум во время голосования по основной поправке
* **Цель**: внесение устных изменений в рассматриваемую поправку для улучшения формулировки

**Процедура поправок второго порядка:**


1. **Предложение**: президиум предлагает изменить текст поправки, находящейся на голосовании
2. **Редактирование**: президиум через систему редактирует текст поправки
3. **Назначение автора**: президиум выбирает, кто будет указан автором поправки второго порядка
4. **Голосование по поправке второго порядка**: комитет сначала голосует за изменение основной поправки
5. **Результат принятия**: при принятии изменения сохраняются, основная поправка голосуется с изменениями
6. **Результат отклонения**: основная поправка голосуется в первоначальном виде без изменений

## 8. Детальная логика системы голосований

### 8.1 Классификация типов голосований

#### 8.1.1 По требуемому большинству

**Простое большинство:**

* **Требование**: 50% + 1 голос от присутствующих делегатов
* **Применение**: стандартные решения комитета, принятие резолюций, большинство поправок

**Квалифицированное большинство:**

* **Требование**: 2/3 голосов от присутствующих делегатов
* **Применение**: важные процедурные вопросы, изменение правил процедуры, особо значимые решения

**Консенсус:**

* **Требование**: принятие решения при отсутствии возражений
* **Механизм**: без формального подсчета голосов
* **Применение**: когда нет явных оппонентов предложения, процедурные вопросы низкой важности

#### 8.1.2 По способу проведения

**Простое голосование:**

* **Отображение**: показываются только общие результаты без детализации по странам
* **Информация**: количество голосов "за", "против" и "воздержались"
* **Анонимность**: индивидуальные позиции стран не раскрываются

**Поименное голосование:**

* **Процедура**: каждая страна вызывается по алфавиту и объявляет свой голос публично
* **Отображение**: полная детализация позиции каждой страны
* **Визуализация**: результаты в стиле ООН (таблица с названиями стран и их голосами)

### 8.2 Специальные правила и ограничения голосования

#### 8.2.1 Варианты голосования для разных ролей

**Стандартные варианты для стран-участниц:**

* **"ЗА"** - поддержка предложения
* **"ПРОТИВ"** - противодействие предложению
* **"ВОЗДЕРЖАТЬСЯ"** - нейтральная позиция, не влияющая на расчет большинства

**Ограничения для наблюдателей и специальных ролей:**

* Полное отсутствие права голоса во всех типах голосований
* Возможность наблюдения за процессом без права влияния на результат

#### 8.2.2 Особые правила поименного голосования

**Процедура вызова стран:**

* Страны вызываются строго в алфавитном порядке
* Каждая страна объявляет свою позицию при вызове

**Правила пропуска и переноса:**

* **Однократный пропуск**: делегат может один раз пропустить свой ход при вызове
* **Обязательное голосование в конце**: пропустившие ход голосуют в конце списка
* **Ограничение при переносе**: делегаты, отправленные в конец списка, НЕ могут воздержаться
* **Принудительный выбор**: только варианты "ЗА" или "ПРОТИВ" при голосовании в конце

  ![](/api/attachments.redirect?id=32388979-3f4a-4a7e-ad11-b0baf877e552 " =1280x720")

## 9. Детальная логика системы процедурных предложений

### 9.1 Классификация процедурных предложений по приоритетам

#### 9.1.1 Предложения высшего приоритета

**Закрытие заседания:**

* Завершение работы комитета на текущий день или полностью
* Может быть предложено в любой момент заседания
* Требует квалифицированного большинства для принятия

**Перерыв в заседании:**

* Временная приостановка работы комитета на определенный период
* Может включать перерыв на обед, технические нужды, консультации
* Время перерыва указывается в предложении

**Лишение права выступать (только президиум):**

* Дисциплинарная мера против делегата за нарушение правил
* Может быть применена на определенное время или до следующей сессии
* Исключительное право президиума без голосования комитета

#### 9.1.2 Процедурные предложения

**Прекращение прений:**

* Завершение текущих дебатов для немедленного перехода к голосованию
* Применяется когда дискуссия исчерпана или требуется ускорить процесс
* Требует простого большинства

**Повторное рассмотрение:**

* Возврат к уже проголосованному вопросу для нового обсуждения
* Возможно только при появлении новых обстоятельств
* Требует квалифицированного большинства

**Установление регламента:**

* Определение или изменение времени выступлений делегатов
* Может устанавливать разное время для разных типов выступлений
* Включает правила продления времени

#### 9.1.3 Предложения по режимам дебатов

**Переход к модерируемым дебатам:**

* Предложение сфокусированного тематического обсуждения
* Должно включать тему, общее время дебатов и время на выступление
* Максимальная продолжительность 20 минут

**Переход к немодерируемым дебатам:**

* Предложение свободных консультаций и переговоров
* Указывается только общее время (максимум 20 минут)
* Разрешаются перемещения по залу и прямое общение

**Переход к неформальным консультациям:**

* Особый режим с передачей слова между делегатами
* Время ограничивается, обычно 15-30 минут
* Уникальная система управления очередностью выступлений

### 9.2 Процесс подачи и обработки процедурных предложений

#### 9.2.1 Способы подачи предложений

**Подача делегатами:**

* Через специальную онлайн-форму в системе
* Автоматическая фиксация времени подачи для определения очередности
* Обязательные поля: тип предложения, приоритет, обоснование с целью

**Подача президиумом:**

* Президиум может вносить предложения напрямую в систему
* Возможность указать конкретную страну как автора предложения
* Возможность оставить авторство за президиумом

**Устная подача с регистрацией:**

* Делегат озвучивает предложение устно
* Президиум регистрирует его в системе и указывает автора
* Все детали фиксируются в том виде, как понял и интерпретировал президиум

#### 9.2.2 Система поддержки и рассмотрения

**Требования поддержки:**

* Большинство процедурных предложений требует поддержки минимум одного другого делегата
* Поддержка может быть выражена через систему или устно
* Предложения высшего приоритета могут не требовать поддержки

**Полномочия президиума по управлению очередью:**

* **Изменение порядка рассмотрения**: президиум может менять очередность предложений по важности
* **Отклонение предложений**: право отклонить предложение без голосования с обязательным указанием причин
* **Объединение схожих предложений**: группировка похожих предложений для совместного рассмотрения

#### 9.2.3 Влияние на статистику участников

**Учет в статистике:**

* **Только принятые к голосованию** предложения учитываются в индивидуальной статистике делегата
* **Отклоненные предложения** не влияют на рейтинги и показатели участия
* **Успешно принятые предложения** дают дополнительные баллы к общему рейтингу

**История процедурных предложений:**

* Все предложения, прошедшие процедуру голосования, сохраняются в истории
* **Принятые предложения** доступны для просмотра всем делегатам
* **Полная история** (включая отклоненные) доступна только президиуму

## 10. Детальная логика системы вопросов и взаимодействий

### 10.1 Иерархическая система типов вопросов

#### 10.1.1 Вопрос личной привилегии (наивысший приоритет)

**Условия применения:**

* Может быть задан в любой момент заседания, кроме процедуры голосования
* Применяется ТОЛЬКО при физическом дискомфорте, мешающем участию в работе
* Примеры: проблемы со слухом, освещением, температурой, техническими средствами

**Процедура обработки:**

* **Единственный тип вопроса, который может быть подан через систему**
* Немедленное рассмотрение председателем без отлагательств
* После одобрения со стороны президиума данного вопроса система пользователя блокируется, до подверждения его пристутсвия в комитете (пользователь нажимает на кнопку об информировании пристутсвия, президиум подтверждает)


## 11. Детальная логика системы режимов дебатов

### 11.1 Формальные дебаты

#### 11.1.1 Основные характеристики и структура

**Регламентированная структура:**

* Строго упорядоченный режим с заранее составленным списком ораторов. 
* Каждому оратору выделяется фиксированное время для выступления
* Дополнительное время для ответов на вопросы (если оратор заявляет о готовности отвечать)

**Система управления очередью:**

* Председатель составляет и ведет официальный список ораторов
* Список может формироваться по заявкам делегатов или по усмотрению председателя
* Президиум может автоматически добавить всех делегатов в алфавитном порядке
* **Право однократного переноса**: каждый делегат может один раз переместить свое выступление в конец текущего списка

#### 11.1.2 Правила выступлений и взаимодействий

**Временные рамки:**

* Время выступления устанавливается процедурным предложением или решением председателя
* Возможность продления времени при наличии соответствующих правил

**Возможности взаимодействия:**

* Вопросы к оратору возможны только при его согласии
* Время на вопросы учитывается отдельно или входит в общее время выступления

### 11.2 Модерируемые дебаты (Moderated Caucus)

#### 11.2.1 Концепция и цели

**Тематическая фокусировка:**

* Обсуждение строго ограничено конкретным аспектом повестки дня
* Цель - глубокое рассмотрение определенной проблемы или вопроса
* Продолжительность ограничена максимум 20 минутами

**Принципы проведения:**

* Председатель объявляет конкретную тему для обсуждения
* Все выступления должны строго соответствовать заявленной теме
* Отклонения от темы пресекаются председателем

#### 11.2.2 Механизм предоставления слова

**Система без предварительного списка:**

* Список ораторов НЕ составляется заранее
* Председатель предоставляет слово по запросу (поднятие таблички с названием страны)
* Стремление обеспечить равное участие всех желающих высказаться

**Временные ограничения:**

* Устанавливается общее время дебатов (до 20 минут)
* Фиксированное время на одно выступление (обычно 1-2 минуты)
* Вопросы к ораторам НЕ предусмотрены для экономии времени

**Техническая реализация:**

* Президиум в системе отмечает текущего выступающего для учета времени
* Автоматический подсчет использованного времени каждым делегатом
* Отображение информации на публичном дисплее

### 11.3 Немодерируемые дебаты (Unmoderated Caucus)

#### 11.3.1 Принципы свободного общения

**Характеристики режима:**

* Режим свободных консультаций и переговоров
* Продолжительность строго ограничена максимум 20 минутами


### 11.4 Неформальная консультация (Informal Consultation)

#### 11.4.1 Уникальная система передачи слова

**Механизм "цепочки ораторов":**

* Председатель предоставляет слово первому желающему выступить (по поднятой табличке)
* После завершения выступления оратор самостоятельно передает слово другому делегату по своему выбору
* Выбранный делегат получает право выступления без дополнительных процедур

**Правила обработки отказов:**

* Если приглашенный делегат отказывается от предоставленного слова, оно автоматически возвращается к предыдущему оратору
* Предыдущий оратор должен выбрать другого участника для передачи слова
* Процесс продолжается до успешной передачи или возврата слова председателю

#### 11.4.2 Контроль и завершение процесса

**Возможности досрочного завершения:**

* Любой текущий оратор может досрочно завершить консультацию
* Слово передается обратно председателю до истечения установленного времени
* Председатель принимает решение о дальнейшем ходе заседания

**Техническая поддержка:**

* Президиум в системе отмечает текущего выступающего для учета времени и отображения на дисплее
* Фиксация цепочки передачи слова для статистических целей
* Контроль общего времени консультации

## 12. Детальная логика системы таймеров

### 12.1 Категории и типы таймеров

#### 12.1.1 Сессионный таймер

**Основные характеристики:**

* Отсчитывает общее время заседания комитета от начала до планируемого окончания
* Устанавливается один раз в начале сессии и не может быть перезапущен
* Показывает оставшееся время до окончания работы комитета

**Правила управления:**

* НЕ может быть изменен в меньшую сторону после начала отсчета
* Может быть продлен президиумом после истечения времени при необходимости
* Продления фиксируются в логах с указанием причин

#### 12.1.2 Таймер выступающего

**Гибкость управления:**

* Индивидуальный таймер для каждого оратора в отдельности
* Может быть перезапущен и установлен заново для каждого нового выступающего
* Возможность изменения времени вручную даже для уже завершивших выступление делегатов

**Дополнительные возможности:**

* **Продление времени**: если правилами предусмотрена возможность продления после голосования
* **Передача времени**: президиум может передать оставшееся на таймере время следующему делегату
* **Ретроактивные изменения**: корректировка времени для делегатов, которые уже выступили (например, при технических сбоях)

#### 12.1.3 Дополнительные таймеры

**Многофункциональная система:**

* Система поддерживает до 6 дополнительных таймеров одновременно
* Каждый таймер может иметь собственное назначение и настройки

**Области применения:**

* **Модерируемые дебаты**: общее время тематического обсуждения
* **Перерывы**: контроль времени технических пауз и перерывов на обед
* **Голосования**: ограничение времени на процедуры голосования
* **Неформальные консультации**: контроль времени свободного общения
* **Специальные процедуры**: любые другие временные ограничения по необходимости

### 12.2 Система визуальной и звуковой индикации

#### 12.2.1 Цветовая индикация состояния

**Трехцветная система предупреждений:**

* **Зеленый цвет**: более 30 секунд до завершения - нормальное состояние
* **Желтый цвет**: от 10 до 30 секунд до завершения - предупреждение о скором окончании
* **Красный цвет**: менее 10 секунд до завершения - критическое предупреждение

#### 12.2.2 Звуковые уведомления

**Система автоматических сигналов:**

* **За 30 секунд**: первое предупреждение о приближении окончания времени
* **За 10 секунд**: финальное предупреждение перед окончанием
* **По истечении времени**: сигнал о завершении отведенного времени

**Настройки звуков:**

* Различные тональности для разных типов предупреждений
* Возможность отключения звуков при необходимости
* Дублирование звуковых сигналов визуальными эффектами

### 12.3 Инструменты управления таймерами

#### 12.3.1 Полномочия президиума

**Полный контроль над временем:**

* **Пауза**: постановка любого таймера на паузу в любой момент
* **Модификация**: изменение времени на любом таймере до, во время и после его работы
* **Досрочное завершение**: остановка таймера до истечения установленного времени
* **Перенос времени**: передача оставшихся минут/секунд между делегатами

#### 12.3.2 Отображение информации

**Публичный дисплей:**

* Одновременное отображение основного и всех дополнительных активных таймеров
* Информация о текущем выступающем делегате с указанием страны
* Очередь следующих выступающих (2 следующих делегата в списке)
* При режиме госсип-бокса - отображение госсипов или результатов голосования

**Интерфейс президиума:**

* Детальная информация по всем таймерам с возможностью индивидуального управления
* История использования времени каждым делегатом
* Статистика по продолжительности различных режимов дебатов

## 13. Детальная логика системы дипломатической переписки

### 13.1 Типы сообщений и коммуникаций

#### 13.1.1 Двусторонняя переписка

**Характеристики и возможности:**

* Приватное общение между двумя делегатами
* Выбор страны-получателя из полного списка участников комитета
* Различные уровни приоритета сообщений (обычное, важное, срочное)
* Полная конфиденциальность переписки от других участников

**Функциональность:**

* Уведомления о получении и прочтении сообщений
* История переписки с возможностью поиска
* Возможность прикрепления файлов (в рамках ограничений безопасности)

#### 13.1.2 Групповые сообщения

**Система создания и управления группами:**

* **Обязательное одобрение президиума** для создания любой группы
* Заявка на создание группы должна содержать обоснование необходимости
* Указание предполагаемых участников и цели группового общения

**Особые правила участия:**

* **Автоматическое право вступления**: члены президиума могут вступать в любые группы без дополнительных разрешений
* Возможность мониторинга групповых обсуждений президиумом при необходимости
* Централизованное управление списком участников группы

#### 13.1.3 Официальные уведомления

**Источник и полномочия:**

* Отправляются исключительно президиумом комитета
* Могут адресоваться как всем участникам одновременно, так и отдельным странам

**Особенности статуса:**

* Особый статус важности с обязательными уведомлениями
* Невозможность игнорирования или пропуска
* Автоматическое логирование факта получения каждым адресатом

### 13.2 Система опросов (Polls)

#### 13.2.1 Создание и управление опросами

**Полномочия по созданию:**

* Исключительное право президиума на создание опросов
* Цель: быстрый сбор мнений участников по текущим вопросам повестки дня или процедурным моментам
* Автоматическая загрузка в качестве пунктктов для голосвания списка всех делегатов в алфавитном порядке (голосование за беста)

**Настройки опросов:**

* **Анонимность**: выбор между анонимными или открытыми опросами
* **Временные ограничения**: установка срока действия опроса для создания динамики
* **Типы вопросов**: одиночный выбор, множественный выбор, текстовые ответы

#### 13.2.2 Участие и результаты

**Механизм участия:**

* Участники получают уведомления о новых опросах
* Возможность изменения ответа до истечения срока опроса
* Автоматическое напоминание об опросах близко к истечению времени

**Обработка результатов:**

* Автоматическая агрегация и анализ ответов
* Визуализация результатов в виде графиков и диаграмм
* Возможность экспорта результатов для дальнейшего анализа

### 13.3 Система Gossip-сообщений

#### 13.3.1 Принципы анонимного общения

**Доступность и условия:**

* Любой делегат может отправлять gossip-сообщения в любой момент времени
* Полная анонимность отправителя - получатели не могут определить автора
* Сообщения отправляются на дисплей после одобрения президиума, при активации gossip-режима. При этом, президиум может выбрать любое сообщение для отображения
* При отправке сообщений можно выбрать получателя и указание автора, а также тип сообщения (опционально)
* Существует 2 дополнительных типа - Признание и Действие (требует получателя)
  Признание и Действие отображаются со специальной темой (признание — розовое с сердечками)


#### 13.3.2 Модерация и контроль

**Системы фильтрации:**

* Автоматическая фильтрация неподобающего содержания
* Право президиума удалять сообщения, нарушающие этику

**Ограничения и правила:**

* Ограничения по частоте отправки для предотвращения спама
* Временные блокировки при злоупотреблении системой

## 14. Детальная логика системы статистики и рейтинга

### 14.1 Индивидуальные метрики участия

#### 14.1.1 Речевая активность

**Количественные показатели:**

* **Общее количество выступлений** во всех режимах дебатов
* **Суммарное время речи** в минутах и секундах
* **Средняя продолжительность выступления** для оценки лаконичности или детальности

**Качественные характеристики:**

* **Распределение активности по режимам**: отдельный учет выступлений в формальных дебатах, модерируемых дискуссиях, неформальных консультациях
* **Соблюдение временных рамок**: процент выступлений, укладывающихся в установленный регламент
* **Частота использования дополнительного времени**: при наличии права продления

#### 14.1.2 Документальная деятельность

**Работа с резолюциями:**

* **Авторство резолюций**: количество коалиций, где делегат выступал инициатором и главой
* **Соавторство резолюций**: количество коалиций, в которых делегат участвовал как соавтор
* **Успешность документов**: количество резолюций, одобренных президиумом и принятых комитетом

**Активность по поправкам:**

* **Количество поданных поправок** с разбивкой по типам (исключение, изменение, добавление)
* **Принятые к голосованию поправки**: показатель качества предложений
* **Успешно принятые поправки**: влияние на итоговый документ комитета

#### 14.1.3 Процедурная активность

**Процедурные предложения:**

* **Общее количество процедурных предложений** с разбивкой по типам и приоритетам
* **Процент принятых предложений**: показатель понимания процедур и своевременности инициатив
* **Влияние на ход заседания**: оценка значимости принятых предложений

**Участие в голосованиях:**

* **Процент участия в голосованиях**: отношение количества голосований, в которых участвовал делегат, к общему числу
* **Активность в поименных голосованиях**: отдельная статистика для публичных голосований
* **Использование права на ответ**: количество запросов и предоставленных ответов

#### 14.1.4 Дипломатическая и коммуникационная активность

**Переписка и общение:**

* **Объем дипломатической переписки**: количество отправленных и полученных сообщений
* **Скорость ответов на сообщения**: среднее время реакции на входящую корреспонденцию
* **Участие в групповых обсуждениях**: активность в групповых чатах и форумах

**Участие в опросах и gossip:**

* **Участие в анонимных опросах**: процент опросов, в которых делегат принял участие
* **Активность в gossip-системе**: частота участия в неформальном общении (с сохранением анонимности)

#### 14.1.5 Общие показатели участия

**Посещаемость и присутствие:**

* **Присутствие на перекличках**: процент сессий, в которых делегат был отмечен как присутствующий
* **Время онлайн** в системе во время сессий (с низким весом для оффлайн мероприятий)
* **Стабильность участия**: регулярность участия в различных процедурах комитета

### 14.2 Система расчета интегрального рейтинга

#### 14.2.1 Формула подсчета баллов

**Компоненты итогового рейтинга:**

```javascript

const delegateScore = {
  // Речевая активность (до 40% итогового рейтинга)
  speeches: (speechCount * 10) + (speechTime * 0.1),
  
  // Участие в голосованиях (до 25% итогового рейтинга)
  voting: votingParticipation * 20, // процент участия
  
  // Документальная деятельность (до 30% итогового рейтинга)
  resolutions: (authoredResolutions * 50) + (coAuthoredResolutions * 20),
  amendments: (submittedAmendments * 10) + (passedAmendments * 25),
  
  // Процедурная активность (до 20% итогового рейтинга)
  procedures: (submittedMotions * 15) + (acceptedMotions * 35),
  
  // Общая активность (минимальный вес для оффлайн мероприятий)
  activity: onlineTime * 0.02,
  
  // Итоговый балл
  totalScore: speeches + voting + resolutions + amendments + procedures + activity
};
```

#### 14.2.2 Принципы балансировки метрик

**Приоритизация качественных показателей:**

* **Принятые документы** оцениваются выше, чем просто поданные
* **Успешные процедурные предложения** имеют больший вес, чем отклоненные
* **Регулярное участие** в голосованиях важнее единичных активностей

**Учет специфики оффлайн мероприятий:**

* **Минимальный вес времени онлайн** - участники не обязаны быть постоянно в системе
* **Фокус на содержательную активность** - выступления, документы, процедуры
* **Поощрение дипломатического взаимодействия** - коалиции, соавторство

### 14.3 Отображение и использование статистики

#### 14.3.1 Для президиума комитета

**Панель мониторинга активности:**

* **Рейтинг делегатов комитета** в реальном времени с разбивкой по компонентам
* **Топ-10 наиболее активных участников** с детализацией достижений
* **Выявление наименее активных** участников для возможного стимулирования

**Аналитические инструменты:**

* **Статистика по режимам дебатов**: какие режимы наиболее популярны, эффективны
* **Анализ документооборота**: успешность коалиций, качество поправок
* **Процедурная активность**: частота и успешность процедурных предложений

#### 14.3.2 Для администрации мероприятия

**Сводная аналитика:**

* **Общий рейтинг** по всем комитетам мероприятия
* **Сравнительная статистика** между комитетами
* **Выявление лучших делегаций** для награждения

**Инструменты экспорта:**

* **Детальные отчеты** по каждому участнику
* **Сводные таблицы** для церемонии награждения
* **Статистика мероприятия** для организационных выводов

#### 14.3.3 Генерация отчетов для участников

**Индивидуальные отчеты:**

* Каждый делегат получает персональный отчет на указанный email после завершения мероприятия
* **Детализация по всем аспектам участия** с объяснением системы подсчета баллов
* **Сравнение со средними показателями** по комитету для самооценки
* **Рекомендации для улучшения** участия в будущих мероприятиях

## 15. Детальная логика презентационного интерфейса

### 15.1 Информационные компоненты публичного дисплея

Доступ к презентационному дисплею осуществляется президиумом с помощью генерации одноразового кода, который вводится на устройстве, используемом для презентации.

#### 15.1.1 Основная информация о сессии

**Статус заседания:**

* **Текущий активный режим дебатов** с описанием его особенностей
* **Оставшееся время сессии** до планируемого окончания
* **Номер сессии** и дата проведения заседания

**Информация о выступающих:**

* **Текущий выступающий делегат** с указанием страны и флага
* **Очередь следующих ораторов** - показ 2 следующих по списку делегатов
* **Оставшееся время выступления** с цветовой индикацией

#### 15.1.2 Система таймеров на дисплее

**Многоуровневое отображение времени:**

* **Основной таймер** (сессионный или выступающего) крупным шрифтом в центре
* **Дополнительные таймеры** (до 6 одновременно) в отдельной области дисплея
* **Цветовая индикация** состояния каждого таймера согласно правилам

**Информативность отображения:**

* **Назначение каждого таймера** ("Выступление", "Модерируемые дебаты", "Перерыв")
* **Прогресс-бары** для визуального отображения израсходованного времени
* **Звуковые сигналы** синхронизированы с визуальными предупреждениями

#### 15.1.3 Информация о голосованиях

**Во время активного голосования:**

* **Предмет голосования** - четкая формулировка вопроса или названия документа
* **Тип голосования** (простое/поименное) и требуемое большинство
* **Прогресс голосования** - процент уже проголосовавших делегатов
* **Предварительные результаты** в реальном времени (количество "за", "против", "воздержались")

**При поименном голосовании:**

* **Список стран** с отображением их голосов в стиле ООН
* **Текущий вызываемый делегат** с выделением в общем списке
* **Окончательные результаты** с указанием принятия или отклонения

#### 15.1.4 Процедурная информация

**Активные процедурные предложения:**

* **Список поданных предложений** в порядке приоритета
* **Текущее рассматриваемое предложение** с указанием автора
* **Очередь рассмотрения** следующих процедурных вопросов

**История решений:**

* **Последние принятые решения** (3-5 самых последних)
* **Изменения в регламенте** и их влияние на ход заседания
* **Активные ограничения** (например, установленное время выступлений)

#### 15.1.5 Контроль кворума

**Статус участия:**

* **Количество присутствующих делегатов** с обновлением в реальном времени
* **Требуемый кворум** для правомочности принятия решений (1/2)
* **Статус возможности голосования** - можно ли в данный момент проводить голосования

### 15.2 Система управления презентационным интерфейсом

#### 15.2.1 Оперативное управление контентом

**Полномочия президиума:**

* **Обновление отображаемой информации** в реальном времени
* **Переключение режимов отображения** в зависимости от текущих процедур
* **Выделение приоритетной информации** для привлечения внимания

**Автоматические обновления:**

* **Синхронизация с действиями в системе** - все изменения отображаются мгновенно
* **Обновление таймеров** каждую секунду с плавными переходами
* **Изменение статусов** участников, голосований, процедур

#### 15.2.2 Система уведомлений и объявлений

**Срочные уведомления:**

* **Экстренные объявления** для всех участников с отображением на главном экране
* **Технические уведомления** о сбоях, изменениях, важных моментах
* **Процедурные напоминания** о дедлайнах, голосованиях, процедурах

**Координация действий:**

* **Синхронизация** действий всех участников комитета
* **Массовые уведомления** о смене режимов, перерывах, важных решениях
* **Дублирование** критически важной информации на всех интерфейсах

#### 15.2.3 Техническая поддержка и диагностика

**Инструменты мониторинга:**

* **Журнал действий** с фиксацией всех изменений и их авторов
* **Диагностика подключений** - статус связи с различными компонентами системы
* **Мониторинг производительности** отображения информации

**Возможности восстановления:**

* **Откат некорректных операций** при ошибочных действиях
* **Восстановление данных** при технических сбоях
* **Резервные способы отображения** при проблемах с основным интерфейсом

## 16. Техническая реализация - расширенная спецификация

### 16.1 База данных MongoDB - полная структура

#### 16.1.1 Коллекции пользователей и аутентификации

```javascript
// Пользователи системы
users: {
  _id: ObjectId,
  role: String, // 'admin', 'presidium', 'delegate'
  username: String, // для админа/президиума
  password: String, // bcrypt хеш для админа/президиума
  email: String, // email делегата после привязки
  qrToken: String, // JWT токен для QR-кода
  isQrActive: Boolean, // активность QR-кода
  committeeId: ObjectId,
  countryName: String, // для делегатов
  specialRole: String, // для наблюдателей/спец.ролей
  presidiumRole: String, // 'chairman', 'co-chairman', 'expert', 'secretary'
  lastLogin: Date,
  sessionId: String, // для контроля единственной сессии
  createdAt: Date,
  updatedAt: Date
}

// Активные сессии для контроля доступа
activeSessions: {
  _id: ObjectId,
  userId: ObjectId,
  sessionToken: String,
  ipAddress: String,
  userAgent: String,
  createdAt: Date,
  lastActivity: Date,
  isActive: Boolean
}
```

#### 16.1.2 Коллекции мероприятий и комитетов

```javascript
// Мероприятия
events: {
  _id: ObjectId,
  name: String,
  description: String,
  startDate: Date,
  endDate: Date,
  status: String, // 'draft', 'active', 'completed'
  settings: {
    registrationDeadline: Date,
    qrExpirationPeriod: Number, // часы
    allowLateRegistration: Boolean
  },
  createdBy: ObjectId,
  createdAt: Date,
  updatedAt: Date
}

// Комитеты
committees: {
  _id: ObjectId,
  eventId: ObjectId,
  name: String,
  type: String, // 'GA', 'SC', 'other'
  description: String,
  language: String,
  status: String, // 'setup', 'active', 'completed'
  
  // Участники комитета
  countries: [{
    name: String,
    flagUrl: String, // ссылка на изображение флага
    isPermanentMember: Boolean, // для СБ
    hasVetoRight: Boolean, // для СБ
    isObserver: Boolean,
    specialRole: String, // для специальных ролей
    email: String, // привязанный email
    qrToken: String, // индивидуальный токен
    isQrActive: Boolean,
    registeredAt: Date,
    lastActivity: Date
  }],
  
  // Президиум комитета
  presidium: [{
    userId: ObjectId,
    role: String, // 'chairman', 'co-chairman', 'expert', 'secretary'
    appointedAt: Date,
    appointedBy: ObjectId
  }],
  
  // Настройки работы комитета
  settings: {
    minCoalitionSize: Number,
    documentDeadlines: {
      positionPapers: Date,
      resolutions: Date,
      amendments: Date
    },
    votingRules: {
      defaultMajority: String, // 'simple', 'qualified'
      allowConsensus: Boolean
    },
    speechSettings: {
      defaultSpeechTime: Number, // секунды
      allowExtensions: Boolean,
      extensionTime: Number
    }
  },
  
  createdAt: Date,
  updatedAt: Date
}
```

#### 16.1.3 Коллекции документов

```javascript
// Все типы документов
documents: {
  _id: ObjectId,
  type: String, // 'position_paper', 'public_document', 'resolution_draft'
  committeeId: ObjectId,
  
  // Автор документа
  authorEmail: String,
  authorCountry: String,
  uploadedBy: ObjectId, // для публичных документов - член президиума
  
  // Файловая информация
  filename: String,
  originalName: String,
  fileSize: Number,
  mimeType: String,
  filePath: String, // путь к файлу на сервере
  
  // Содержание и метаданные
  content: {
    extractedText: String, // извлеченный текст для поиска
    pageCount: Number,
    wordCount: Number
  },
  
  // Статус и модерация
  status: String, // 'uploaded', 'under_review', 'approved', 'rejected', 'needs_revision'
  presidiumReview: {
    reviewedBy: ObjectId,
    decision: String,
    comments: String,
    reviewedAt: Date
  },
  
  // Версионирование
  version: Number,
  parentDocumentId: ObjectId, // для новых версий
  versions: [{
    version: Number,
    filename: String,
    uploadedAt: Date,
    status: String
  }],
  
  // Доступность для публичных документов
  isPublic: Boolean,
  publicTitle: String,
  publicDescription: String,
  
  uploadedAt: Date,
  updatedAt: Date
}
```

#### 16.1.4 Коллекции коалиций и резолюций

```javascript
// Коалиции
coalitions: {
  _id: ObjectId,
  committeeId: ObjectId,
  name: String,
  description: String,
  
  // Структура коалиции
  headCountry: String, // глава коалиции
  headEmail: String,
  
  // Участники коалиции
  members: [{
    country: String,
    email: String,
    status: String, // 'invited', 'accepted', 'declined'
    invitedAt: Date,
    respondedAt: Date,
    role: String // 'author', 'co-author'
  }],
  
  // Статус коалиции
  isActive: Boolean,
  minMembersReached: Boolean,
  
  // Связанная резолюция
  resolutionId: ObjectId,
  
  createdAt: Date,
  updatedAt: Date
}

// Резолюции
resolutions: {
  _id: ObjectId,
  coalitionId: ObjectId,
  committeeId: ObjectId,
  
  // Основная информация
  title: String,
  content: String,
  documentType: String, // зависит от типа комитета
  
  // Авторство
  authors: [String], // названия стран
  authorEmails: [String],
  coAuthors: [String], // соавторы
  coAuthorEmails: [String],
  
  // Статус и модерация
  status: String, // 'draft', 'submitted', 'under_review', 'approved', 'rejected', 'working_document'
  submissionDeadline: Date,
  
  presidiumReview: {
    reviewedBy: ObjectId,
    decision: String, // 'accept', 'reject_with_deadline', 'reject_with_extension'
    comments: String,
    allowResubmission: Boolean,
    extendedDeadline: Date,
    reviewedAt: Date
  },
  
  // Голосование
  votingResults: {
    votesFor: Number,
    votesAgainst: Number,
    abstentions: Number,
    totalVotes: Number,
    passed: Boolean,
    votingType: String, // 'simple', 'rollCall'
    votes: [{
      country: String,
      vote: String, // 'for', 'against', 'abstain'
      timestamp: Date
    }]
  },
  
  // Версионирование
  version: Number,
  versionHistory: [{
    version: Number,
    content: String,
    submittedAt: Date,
    status: String
  }],
  
  submittedAt: Date,
  lastModifiedAt: Date
}
```

#### 16.1.5 Коллекции поправок

```javascript
// Поправки к резолюциям
amendments: {
  _id: ObjectId,
  resolutionId: ObjectId,
  committeeId: ObjectId,
  
  // Авторство
  authorEmail: String,
  authorCountry: String,
  coAuthors: [{
    email: String,
    country: String,
    status: String, // 'invited', 'accepted', 'declined'
    invitedAt: Date,
    respondedAt: Date
  }],
  
  // Содержание поправки
  targetParagraph: Number, // номер пункта для изменения
  actionType: String, // 'delete', 'modify', 'add'
  originalText: String, // исходный текст (для modify/delete)
  proposedText: String, // предлагаемый текст (для modify/add)
  newParagraphAfter: Number, // для добавления нового пункта
  
  // Категоризация
  documentPart: String, // 'preamble', 'operative'
  
  // Статус и модерация
  status: String, // 'submitted', 'under_review', 'approved', 'rejected', 'voted'
  presidiumReview: {
    reviewedBy: ObjectId,
    decision: String, // 'accept', 'accept_with_changes', 'reject'
    technicalChanges: String, // внесенные технические правки
    comments: String,
    reviewedAt: Date
  },
  
  // Поправки второго порядка
  secondOrderAmendment: {
    proposedBy: ObjectId, // член президиума
    proposedAuthor: String, // назначенный автор поправки 2-го порядка
    modifiedText: String,
    votingResult: {
      passed: Boolean,
      votesFor: Number,
      votesAgainst: Number,
      abstentions: Number
    }
  },
  
  // Результаты голосования
  votingResults: {
    votesFor: Number,
    votesAgainst: Number,
    abstentions: Number,
    passed: Boolean,
    votingType: String,
    votes: [{
      country: String,
      vote: String,
      timestamp: Date
    }],
    integratedAt: Date // когда поправка была интегрирована в резолюцию
  },
  
  // Приоритизация
  priority: Number, // автоматически рассчитывается системой
  sortOrder: Number,
  
  submittedAt: Date,
  votedAt: Date
}
```

#### 16.1.6 Коллекции сессий и режимов дебатов

```javascript
// Сессии комитета
sessions: {
  _id: ObjectId,
  committeeId: ObjectId,
  number: Number, // номер сессии
  
  // Статус сессии
  status: String, // 'active', 'paused', 'completed'
  startedAt: Date,
  endedAt: Date,
  
  // Текущий режим дебатов
  currentMode: String, // 'formal', 'moderated', 'unmoderated', 'informal', 'closed'
  modeStartedAt: Date,
  modeSettings: {
    topic: String, // для модерируемых дебатов
    totalTime: Number, // общее время режима в секундах
    speechTime: Number, // время на выступление в секундах
    allowQuestions: Boolean
  },
  
  // История режимов
  modeHistory: [{
    mode: String,
    startedAt: Date,
    endedAt: Date,
    settings: Object
  }],
  
  // Список выступающих
  speakerList: [{
    country: String,
    email: String,
    hasSpoken: Boolean,
    speaking: Boolean,
    position: Number, // позиция в очереди
    addedAt: Date,
    spokAt: Date,
    speechDuration: Number // фактическое время выступления
  }],
  
  // Посещаемость
  attendance: [{
    country: String,
    email: String,
    present: Boolean,
    markedAt: Date,
    markedBy: ObjectId
  }],
  
  // Кворум
  quorum: {
    required: Number, // требуемое количество для кворума
    present: Number, // текущее количество присутствующих
    hasQuorum: Boolean,
    lastUpdated: Date
  },
  
  // Состояние таймеров
  timers: {
    session: {
      totalDuration: Number, // общее время сессии в секундах
      startedAt: Date,
      pausedAt: Date,
      remainingTime: Number,
      isPaused: Boolean,
      extensions: [{
        duration: Number,
        reason: String,
        authorizedBy: ObjectId,
        addedAt: Date
      }]
    },
    
    speaker: {
      currentSpeaker: String, // страна текущего выступающего
      duration: Number,
      startedAt: Date,
      pausedAt: Date,
      remainingTime: Number,
      isPaused: Boolean,
      allowExtension: Boolean,
      extensionUsed: Boolean
    },
    
    additional: [{
      id: String,
      purpose: String, // 'moderated_caucus', 'break', 'voting'
      duration: Number,
      startedAt: Date,
      remainingTime: Number,
      isActive: Boolean
    }]
  }
}
```

#### 16.1.7 Коллекции голосований

```javascript
// Голосования
votings: {
  _id: ObjectId,
  committeeId: ObjectId,
  sessionId: ObjectId,
  
  // Тип и предмет голосования
  votingType: String, // 'simple', 'rollCall'
  subjectType: String, // 'resolution', 'amendment', 'procedural_motion', 'question'
  subjectId: ObjectId, // ID резолюции, поправки, процедурного предложения
  
  // Содержание голосования
  title: String,
  description: String,
  fullText: String, // полный текст для голосования
  
  // Требования к большинству
  majorityRequired: String, // 'simple', 'qualified', 'consensus'
  majorityThreshold: Number, // рассчитанное число голосов
  
  // Участники голосования
  eligibleVoters: [{
    country: String,
    email: String,
    hasVetoRight: Boolean, // для СБ
    canVote: Boolean // исключает наблюдателей
  }],
  
  // Процесс голосования
  votes: [{
    country: String,
    email: String,
    vote: String, // 'for', 'against', 'abstain'
    timestamp: Date,
    rollCallPosition: Number // для поименного голосования
  }],
  
  // Управление поименным голосованием
  rollCallOrder: [String], // порядок вызова стран
  currentlyVoting: String, // страна, которая сейчас голосует
  skippedCountries: [String], // страны, пропустившие ход
  
  // Результаты
  results: {
    votesFor: Number,
    votesAgainst: Number,
    abstentions: Number,
    totalVotes: Number,
    presentVoters: Number,
    passed: Boolean,
    vetoUsed: Boolean,
    vetoCountry: String // если было вето
  },
  
  // Статус и время
  status: String, // 'active', 'completed', 'cancelled'
  startedAt: Date,
  completedAt: Date,
  timeLimit: Number // лимит времени на голосование в секундах
}
```

#### 16.1.8 Коллекции процедурных предложений и вопросов

```javascript
// Процедурные предложения
proceduralMotions: {
  _id: ObjectId,
  sessionId: ObjectId,
  committeeId: ObjectId,
  
  // Авторство
  authorEmail: String,
  authorCountry: String,
  submittedBy: String, // 'delegate', 'presidium'
  presidiumAuthor: ObjectId, // если подано президиумом
  
  // Содержание предложения
  motionType: String, // 'close_debate', 'suspension', 'moderated_caucus', etc.
  priority: String, // 'highest', 'procedural', 'debate'
  text: String,
  justification: String,
  purpose: String,
  
  // Параметры предложения
  parameters: {
    duration: Number, // для режимов с ограничением времени
    speechTime: Number, // для модерируемых дебатов
    topic: String, // тема для тематических дебатов
    targetDelegate: String // для дисциплинарных мер
  },
  
  // Поддержка
  support: [{
    country: String,
    email: String,
    supportedAt: Date
  }],
  requiredSupport: Number,
  hasRequiredSupport: Boolean,
  
  // Статус и рассмотрение
  status: String, // 'submitted', 'under_review', 'accepted', 'rejected', 'voted', 'implemented'
  presidiumDecision: {
    action: String, // 'accept', 'reject', 'modify_order'
    comments: String,
    decidedBy: ObjectId,
    decidedAt: Date,
    newPriority: Number // измененный приоритет
  },
  
  // Результаты голосования
  votingResult: {
    votingId: ObjectId,
    passed: Boolean,
    implementedAt: Date
  },
  
  submittedAt: Date,
  processedAt: Date
}

// Вопросы различных типов
questions: {
  _id: ObjectId,
  sessionId: ObjectId,
  committeeId: ObjectId,
  
  // Авторство и адресация
  authorEmail: String,
  authorCountry: String,
  targetRole: String, // 'chairman', 'expert', 'speaker'
  targetCountry: String, // для вопросов к выступающему
  
  // Тип и содержание
  questionType: String, // 'personal_privilege', 'voting_procedure', 'to_speaker', 'procedure', 'to_chairman', 'to_expert', 'right_of_reply'
  priority: Number, // автоматически назначается по типу
  text: String,
  context: String, // контекст или обоснование
  
  // Статус и обработка
  status: String, // 'submitted', 'under_review', 'answered', 'rejected'
  response: {
    respondedBy: ObjectId,
    responseText: String,
    responseType: String, // 'oral', 'written'
    respondedAt: Date
  },
  
  // Для права на ответ
  rightOfReply: {
    targetStatement: String, // на какое заявление отвечает
    targetSpeaker: String,
    justification: String,
    scheduledFor: Date // когда будет предоставлено
  },
  
  submittedAt: Date,
  processedAt: Date
}
```

#### 16.1.9 Коллекции дипломатической переписки

```javascript
// Сообщения
messages: {
  _id: ObjectId,
  committeeId: ObjectId,
  
  // Тип и участники
  messageType: String, // 'bilateral', 'group', 'official', 'gossip'
  senderEmail: String,
  senderCountry: String,
  recipients: [{
    email: String,
    country: String,
    deliveredAt: Date,
    readAt: Date
  }],
  
  // Для групповых сообщений
  groupId: ObjectId,
  groupName: String,
  
  // Содержание
  subject: String,
  content: String,
  priority: String, // 'normal', 'important', 'urgent'
  
  // Для gossip
  isAnonymous: Boolean,
  gossipId: String, // анонимный идентификатор для gossip
  
  // Для официальных сообщений
  isOfficial: Boolean,
  sentBy: ObjectId, // член президиума
  requiresAcknowledgment: Boolean,
  
  // Статус и доставка
  status: String, // 'sent', 'delivered', 'read'
  sentAt: Date,
  editedAt: Date,
  isDeleted: Boolean
}

// Группы для переписки
messageGroups: {
  _id: ObjectId,
  committeeId: ObjectId,
  
  // Основная информация
  name: String,
  description: String,
  purpose: String,
  
  // Участники
  members: [{
    email: String,
    country: String,
    role: String, // 'admin', 'member'
    joinedAt: Date,
    addedBy: String
  }],
  
  // Модерация
  createdBy: String, // email создателя
  approvedBy: ObjectId, // член президиума, одобривший группу
  approvalStatus: String, // 'pending', 'approved', 'rejected'
  approvalComments: String,
  
  // Настройки
  isPrivate: Boolean,
  allowPresidiumAccess: Boolean, // автоматически true
  
  createdAt: Date,
  approvedAt: Date
}

// Опросы
polls: {
  _id: ObjectId,
  committeeId: ObjectId,
  
  // Создание
  createdBy: ObjectId, // член президиума
  title: String,
  description: String,
  question: String,
  
  // Варианты ответов
  options: [{
    id: String,
    text: String,
    description: String
  }],
  
  // Настройки опроса
  allowMultipleChoices: Boolean,
  isAnonymous: Boolean,
  requiresJustification: Boolean,
  
  // Время действия
  timeLimit: Number, // в минутах
  expiresAt: Date,
  
  // Участники и ответы
  eligibleParticipants: [String], // emails
  responses: [{
    respondentEmail: String,
    respondentCountry: String,
    selectedOptions: [String],
    justification: String,
    respondedAt: Date,
    isAnonymous: Boolean
  }],
  
  // Результаты
  results: {
    totalResponses: Number,
    responseRate: Number, // процент ответивших
    optionCounts: [{
      optionId: String,
      count: Number,
      percentage: Number
    }]
  },
  
  // Статус
  status: String, // 'active', 'completed', 'cancelled'
  createdAt: Date,
  completedAt: Date
}
```

#### 16.1.10 Коллекции статистики и активности

```javascript
// Активности для статистики
activities: {
  _id: ObjectId,
  eventId: ObjectId,
  committeeId: ObjectId,
  sessionId: ObjectId,
  
  // Участник
  userEmail: String,
  countryName: String,
  
  // Тип активности
  actionType: String, // 'speech', 'vote', 'document_upload', 'amendment', 'motion', 'question', 'message'
  category: String, // 'debate', 'voting', 'documentation', 'procedural', 'communication'
  
  // Детали активности
  details: {
    duration: Number, // для выступлений - время в секундах
    target: String, // цель действия (ID документа, получатель сообщения)
    result: String, // результат ('passed', 'rejected', 'accepted')
    mode: String, // режим дебатов для выступлений
    votingType: String, // тип голосования
    documentType: String, // тип документа
    additionalInfo: Object // дополнительная информация
  },
  
  // Влияние на рейтинг
  scoreImpact: Number, // количество баллов за действие
  qualityMultiplier: Number, // мультипликатор за качество (принятые документы, успешные предложения)
  
  // Контекст
  relatedId: ObjectId, // ID связанной записи (резолюции, голосования, etc.)
  
  timestamp: Date,
  processedAt: Date
}

// Агрегированная статистика по участникам
delegateStatistics: {
  _id: ObjectId,
  eventId: ObjectId,
  committeeId: ObjectId,
  userEmail: String,
  countryName: String,
  
  // Речевая активность
  speechStats: {
    totalSpeeches: Number,
    totalSpeechTime: Number, // в секундах
    averageSpeechTime: Number,
    speechesByMode: {
      formal: Number,
      moderated: Number,
      informal: Number
    },
    complianceRate: Number, // процент выступлений в рамках регламента
    extensionsUsed: Number
  },
  
  // Документальная активность
  documentStats: {
    positionPapersUploaded: Number,
    resolutionsAuthored: Number,
    resolutionsCoAuthored: Number,
    approvedResolutions: Number,
    amendmentsSubmitted: Number,
    amendmentsAccepted: Number,
    amendmentsPassed: Number,
    coalitionsJoined: Number,
    coalitionsLed: Number
  },
  
  // Голосования
  votingStats: {
    totalVotings: Number,
    participatedVotings: Number,
    participationRate: Number, // процент участия
    votesFor: Number,
    votesAgainst: Number,
    abstentions: Number,
    rollCallParticipation: Number
  },
  
  // Процедурная активность
  proceduralStats: {
    motionsSubmitted: Number,
    motionsAccepted: Number,
    motionsPassed: Number,
    questionsAsked: Number,
    questionsAnswered: Number,
    rightOfReplyRequests: Number
  },
  
  // Коммуникация
  communicationStats: {
    messagesSent: Number,
    messagesReceived: Number,
    groupsJoined: Number,
    pollsParticipated: Number,
    gossipMessages: Number,
    averageResponseTime: Number // в минутах
  },
  
  // Присутствие
  attendanceStats: {
    sessionsAttended: Number,
    totalSessions: Number,
    attendanceRate: Number,
    punctualityScore: Number,
    timeOnline: Number // в минутах
  },
  
  // Итоговые баллы
  scoring: {
    speechScore: Number,
    documentScore: Number,
    votingScore: Number,
    proceduralScore: Number,
    communicationScore: Number,
    attendanceScore: Number,
    totalScore: Number,
    rank: Number, // место в комитете
    percentileRank: Number // процентиль среди всех участников
  },
  
  // Временные метки
  lastUpdated: Date,
  generatedAt: Date
}
```

#### 16.1.11 Коллекция согласительной комиссии

```javascript
// Согласительные комиссии
reconciliationCommittees: {
  _id: ObjectId,
  committeeId: ObjectId,
  sessionId: ObjectId,
  
  // Причина создания
  trigger: String, // 'all_resolutions_failed'
  failedResolutions: [ObjectId], // ID отклоненных резолюций
  
  // Состав комиссии
  chairman: {
    email: String,
    country: String,
    appointedBy: ObjectId,
    appointedAt: Date
  },
  
  members: [{
    email: String,
    country: String,
    role: String, // 'chairman', 'member'
    appointedBy: ObjectId,
    appointedAt: Date,
    expertise: String // специализация или опыт
  }],
  
  // Рабочий процесс
  workingConditions: {
    timeLimit: Number, // базовое время в минутах
    extensions: [{
      duration: Number,
      reason: String,
      grantedBy: ObjectId,
      grantedAt: Date
    }],
    isolationRequired: Boolean,
    excludedParticipants: [String] // кто не может присутствовать
  },
  
  // Документ комиссии
  document: {
    title: String,
    content: String,
    uploadedBy: String, // chairman email
    uploadedAt: Date,
    documentId: ObjectId // ссылка на созданный документ
  },
  
  // Результаты голосования
  votingResults: {
    votingId: ObjectId,
    passed: Boolean,
    votesFor: Number,
    votesAgainst: Number,
    abstentions: Number,
    nextSteps: String // что происходит в случае отклонения
  },
  
  // Статус и время
  status: String, // 'forming', 'working', 'document_ready', 'voted', 'completed', 'failed'
  createdAt: Date,
  startedWorkAt: Date,
  completedAt: Date,
  
  // Метаинформация
  attemptNumber: Number, // номер попытки (если комиссия пересоздавалась)
  previousCommitteeId: ObjectId // ссылка на предыдущую комиссию
}
```

### 16.2 API Endpoints - полная спецификация

#### 16.2.1 Аутентификация и управление сессиями

```javascript
// Группа: Authentication & Session Management

POST   /api/auth/admin-login              // Вход администратора
POST   /api/auth/presidium-login          // Вход члена президиума
POST   /api/auth/qr-login                 // Первичный вход по QR-коду
POST   /api/auth/email-login              // Последующий вход по email

POST   /api/auth/logout                   // Выход из системы
GET    /api/auth/validate-session         // Проверка активности сессии
POST   /api/auth/refresh-token            // Обновление токена
DELETE /api/auth/terminate-session/:id    // Принудительное завершение сессии

// Управление QR-токенами
POST   /api/auth/reactivate-qr            // Реактивация QR для страны (президиум)
GET    /api/auth/qr-status/:token         // Проверка статуса QR-токена
POST   /api/auth/bind-email               // Привязка email к QR-токену
```

#### 16.2.2 Управление мероприятиями

```javascript
// Группа: Events Management  
GET    /api/events                        // Список мероприятий
POST   /api/events                        // Создание мероприятия (админ)
GET    /api/events/:id                    // Подробности мероприятия
PUT    /api/events/:id                    // Обновление мероприятия (админ)
DELETE /api/events/:id                    // Удаление мероприятия (админ)
PUT    /api/events/:id/status             // Изменение статуса мероприятия
GET    /api/events/:id/statistics         // Общая статистика мероприятия
```

#### 16.2.3 Управление комитетами

```javascript
// Группа: Committee Management

POST   /api/committees                    // Создание комитета (админ)
GET    /api/committees/:id                // Информация о комитете  
PUT    /api/committees/:id                // Обновление настроек комитета
DELETE /api/committees/:id                // Удаление комитета (админ)

// Управление участниками
PUT    /api/committees/:id/countries      // Добавление/удаление стран (президиум)
POST   /api/committees/:id/countries/bulk // Массовое добавление стран
GET    /api/committees/:id/countries      // Список участников комитета
PUT    /api/committees/:id/countries/:name/status // Изменение статуса страны

// Президиум
PUT    /api/committees/:id/presidium      // Назначение президиума (админ)
GET    /api/committees/:id/presidium      // Состав президиума

// QR-коды и доступы
GET    /api/committees/:id/qr-codes       // Генерация PDF с QR-кодами
POST   /api/committees/:id/qr-codes/regenerate // Перегенерация QR для всего комитета
POST   /api/committees/:id/qr-codes/:country/regenerate // Перегенерация для конкретной страны

// Настройки комитета
PUT    /api/committees/:id/settings       // Обновление настроек работы
GET    /api/committees/:id/settings       // Получение текущих настроек
```

#### 16.2.4 Управление документами

```javascript
// Группа: Document Management

// Позиционные письма
POST   /api/documents/position-papers     // Загрузка позиционного письма (делегат)
GET    /api/documents/position-papers/:committeeId // Список позиционных писем
PUT    /api/documents/position-papers/:id/review // Модерация письма (президиум)
GET    /api/documents/position-papers/:id/versions // История версий документа
POST   /api/documents/position-papers/:id/new-version // Загрузка новой версии

// Публичные документы
POST   /api/documents/public              // Загрузка публичного документа (президиум)
GET    /api/documents/public/:committeeId // Список публичных документов
PUT    /api/documents/public/:id          // Обновление публичного документа
DELETE /api/documents/public/:id          // Удаление публичного документа

// Общие операции с документами
GET    /api/documents/:id                 // Получение документа
GET    /api/documents/:id/download        // Скачивание файла
GET    /api/documents/:id/preview         // Предварительный просмотр (извлеченный текст)
```

#### 16.2.5 Коалиции и резолюции

```javascript
// Группа: Coalitions & Resolutions

// Коалиции  
POST   /api/coalitions                    // Создание коалиции (делегат)
GET    /api/coalitions/:committeeId       // Список коалиций в комитете
GET    /api/coalitions/:id                // Детали коалиции
POST   /api/coalitions/:id/invite         // Приглашение в коалицию (глава)
PUT    /api/coalitions/:id/respond        // Ответ на приглашение (приглашенный)
DELETE /api/coalitions/:id/leave          // Выход из коалиции
PUT    /api/coalitions/:id/activate       // Активация коалиции (глава)

// Резолюции
POST   /api/resolutions                   // Загрузка драфта резолюции (глава коалиции)
GET    /api/resolutions/:committeeId      // Список резолюций комитета
GET    /api/resolutions/:id               // Детали резолюции
PUT    /api/resolutions/:id/review        // Модерация резолюции (президиум)
POST   /api/resolutions/:id/new-version   // Загрузка новой версии
GET    /api/resolutions/:id/versions      // История версий резолюции

// Голосование по резолюциям
POST   /api/resolutions/:id/voting        // Создание голосования (президиум)
GET    /api/resolutions/:id/voting-status // Статус голосования
POST   /api/resolutions/presidium-draft   // Загрузка драфта от президиума
```

#### 16.2.6 Поправки

```javascript
// Группа: Amendments

POST   /api/amendments                    // Подача поправки (делегат)
GET    /api/amendments/:resolutionId      // Список поправок к резолюции
GET    /api/amendments/:id                // Детали поправки
PUT    /api/amendments/:id/review         // Модерация поправки (президиум)
POST   /api/amendments/:id/invite-coauthor // Приглашение соавтора
PUT    /api/amendments/:id/coauthor-response // Ответ на приглашение в соавторы

// Поправки второго порядка  
POST   /api/amendments/:id/second-order   // Создание поправки 2-го порядка (президиум)
POST   /api/amendments/:id/second-order/vote // Голосование по поправке 2-го порядка

// Голосование по поправкам
POST   /api/amendments/:id/voting         // Создание голосования (президиум)
GET    /api/amendments/:id/voting-status  // Статус голосования
GET    /api/amendments/committee/:id/priority-order // Порядок рассмотрения поправок
```

#### 16.2.7 Сессии и режимы дебатов

```javascript
// Группа: Sessions & Debate Modes

// Управление сессиями
POST   /api/sessions                      // Создание новой сессии (президиум)
GET    /api/sessions/:committeeId         // Список сессий комитета
GET    /api/sessions/:id                  // Детали текущей сессии
PUT    /api/sessions/:id/status           // Изменение статуса сессии
DELETE /api/sessions/:id                  // Завершение сессии

// Режимы дебатов
PUT    /api/sessions/:id/mode             // Смена режима дебатов (президиум)
GET    /api/sessions/:id/current-mode     // Текущий режим и его параметры
POST   /api/sessions/:id/mode-history     // История смены режимов

// Список выступающих
GET    /api/sessions/:id/speaker-list     // Текущий список выступающих
PUT    /api/sessions/:id/speaker-list     // Обновление списка (президиум)
POST   /api/sessions/:id/speaker-list/add // Добавление в список (делегат)
PUT    /api/sessions/:id/speaker-list/move // Перемещение в конец списка (делегат)
PUT    /api/sessions/:id/current-speaker  // Назначение текущего выступающего

// Посещаемость
PUT    /api/sessions/:id/attendance       // Отметка посещаемости (президиум)
GET    /api/sessions/:id/attendance       // Текущая посещаемость
GET    /api/sessions/:id/quorum           // Статус кворума
```

#### 16.2.8 Система таймеров

```javascript
// Группа: Timer Management

// Управление таймерами
GET    /api/timers/:sessionId             // Состояние всех таймеров сессии
PUT    /api/timers/:sessionId/session     // Управление сессионным таймером
PUT    /api/timers/:sessionId/speaker     // Управление таймером выступающего  
POST   /api/timers/:sessionId/additional  // Создание дополнительного таймера
PUT    /api/timers/:sessionId/additional/:id // Управление дополнительным таймером
DELETE /api/timers/:sessionId/additional/:id // Удаление дополнительного таймера

// Операции с таймерами
POST   /api/timers/:sessionId/:type/start // Запуск таймера
POST   /api/timers/:sessionId/:type/pause // Пауза таймера
POST   /api/timers/:sessionId/:type/resume // Возобновление таймера  
POST   /api/timers/:sessionId/:type/stop  // Остановка таймера
PUT    /api/timers/:sessionId/:type/extend // Продление времени
POST   /api/timers/:sessionId/speaker/transfer // Передача времени следующему делегату

// Настройки и история
PUT    /api/timers/:sessionId/settings    // Настройки таймеров (звуки, цвета)
GET    /api/timers/:sessionId/history     // История использования таймеров
```

#### 16.2.9 Голосования

```javascript
// Группа: Voting Management

// Создание и управление голосованиями
POST   /api/votings                       // Создание голосования (президиум)
GET    /api/votings/:committeeId          // Список голосований комитета
GET    /api/votings/:id                   // Детали голосования
PUT    /api/votings/:id/status            // Изменение статуса голосования
DELETE /api/votings/:id                   // Отмена голосования

// Процесс голосования
POST   /api/votings/:id/vote              // Подача голоса (делегат)
GET    /api/votings/:id/status            // Текущий статус голосования
GET    /api/votings/:id/results           // Результаты голосования
PUT    /api/votings/:id/complete          // Завершение голосования (президиум)

// Поименное голосование
GET    /api/votings/:id/roll-call-order   // Порядок вызова стран
PUT    /api/votings/:id/current-voter     // Установка текущего голосующего
POST   /api/votings/:id/skip              // Пропуск хода в поименном голосовании
GET    /api/votings/:id/skipped-countries // Список стран, пропустивших ход

// Специальные функции
POST   /api/votings/:id/veto              // Использование права вето (СБ)
GET    /api/votings/:id/eligible-voters   // Список участников с правом голоса
```

#### 16.2.10 Процедурные предложения и вопросы

```javascript
// Группа: Procedural Motions & Questions

// Процедурные предложения
POST   /api/motions                       // Подача процедурного предложения (делегат)
GET    /api/motions/:sessionId            // Список ПП для сессии
GET    /api/motions/:id                   // Детали процедурного предложения
PUT    /api/motions/:id/review            // Рассмотрение ПП (президиум)
POST   /api/motions/:id/support           // Поддержка ПП (делегат)
POST   /api/motions/:id/vote              // Голосование по ПП

// ПП от президиума
POST   /api/motions/presidium             // Подача ПП от президиума
PUT    /api/motions/:id/priority          // Изменение приоритета ПП (президиум)

// История и статистика
GET    /api/motions/:sessionId/history    // История принятых ПП
GET    /api/motions/:sessionId/queue      // Очередь рассмотрения ПП

// Вопросы
POST   /api/questions                     // Подача вопроса (делегат)
GET    /api/questions/:sessionId          // Список вопросов для сессии
GET    /api/questions/:id                 // Детали вопроса
PUT    /api/questions/:id/answer          // Ответ на вопрос
PUT    /api/questions/:id/priority        // Изменение приоритета вопроса

// Специальные типы вопросов
POST   /api/questions/personal-privilege  // Вопрос личной привилегии (единственный через систему)
POST   /api/questions/right-of-reply      // Запрос права на ответ
PUT    /api/questions/:id/schedule-reply  // Планирование права на ответ
```

#### 16.2.11 Дипломатическая переписка

```javascript
// Группа: Diplomatic Messaging

// Сообщения
POST   /api/messages                      // Отправка сообщения
GET    /api/messages/:committeeId         // Сообщения пользователя в комитете
GET    /api/messages/:id                  // Детали сообщения  
PUT    /api/messages/:id/read             // Отметка о прочтении
DELETE /api/messages/:id                  // Удаление сообщения
GET    /api/messages/:committeeId/conversation/:country // Переписка с конкретной страной

// Групповые сообщения
POST   /api/groups                        // Запрос на создание группы
GET    /api/groups/:committeeId           // Список групп комитета
POST   /api/groups/:id/join               // Вступление в группу
DELETE /api/groups/:id/leave              // Выход из группы
PUT    /api/groups/:id/approve            // Одобрение группы (президиум)
GET    /api/groups/:id/messages           // Сообщения группы

// Официальные уведомления
POST   /api/messages/official             // Официальное уведомление (президиум)
GET    /api/messages/official/:committeeId // Список официальных уведомлений
PUT    /api/messages/official/:id/acknowledge // Подтверждение получения

// Gossip-система
POST   /api/gossip                        // Отправка gossip-сообщения
GET    /api/gossip/:committeeId           // Gossip-сообщения комитета
DELETE /api/gossip/:id                    // Удаление gossip (модерация)
POST   /api/gossip/:id/report             // Жалоба на gossip-сообщение
```

#### 16.2.12 Опросы

```javascript
// Группа: Polls & Surveys

// Создание и управление опросами
POST   /api/polls                         // Создание опроса (президиум)
GET    /api/polls/:committeeId            // Список опросов комитета
GET    /api/polls/:id                     // Детали опроса
PUT    /api/polls/:id                     // Обновление опроса (до запуска)
DELETE /api/polls/:id                     // Удаление опроса

// Участие в опросах  
POST   /api/polls/:id/respond             // Ответ на опрос (делегат)
PUT    /api/polls/:id/update-response     // Изменение ответа (до истечения времени)
GET    /api/polls/:id/my-response         // Просмотр своего ответа

// Результаты
GET    /api/polls/:id/results             // Результаты опроса
GET    /api/polls/:id/results/export      // Экспорт результатов
PUT    /api/polls/:id/complete            // Досрочное завершение опроса (президиум)
```

#### 16.2.13 Согласительная комиссия

```javascript
// Группа: Reconciliation Committee

// Создание и управление
POST   /api/reconciliation                // Создание согласительной комиссии (президиум)
GET    /api/reconciliation/:committeeId   // Список комиссий комитета
GET    /api/reconciliation/:id            // Детали комиссии
PUT    /api/reconciliation/:id/members    // Назначение состава (президиум)
PUT    /api/reconciliation/:id/chairman   // Назначение председателя

// Рабочий процесс
POST   /api/reconciliation/:id/start      // Начало работы комиссии
PUT    /api/reconciliation/:id/extend-time // Продление времени работы
POST   /api/reconciliation/:id/document   // Загрузка документа комиссии (председатель)
PUT    /api/reconciliation/:id/complete   // Завершение работы

// Голосование по документу комиссии  
POST   /api/reconciliation/:id/vote       // Создание голосования по документу
GET    /api/reconciliation/:id/vote-results // Результаты голосования

// При неудаче
POST   /api/reconciliation/:id/new-attempt // Создание новой попытки с другим составом
```

#### 16.2.14 Статистика и аналитика

```javascript
// Группа: Statistics & Analytics

// Статистика делегатов
GET    /api/statistics/delegate/:email    // Личная статистика делегата
GET    /api/statistics/delegate/:email/detailed // Детальная статистика
GET    /api/statistics/delegate/:email/activities // История активности
POST   /api/statistics/delegate/:email/recalculate // Пересчет статистики

// Статистика комитета  
GET    /api/statistics/committee/:id      // Общая статистика комитета
GET    /api/statistics/committee/:id/rankings // Рейтинг делегатов
GET    /api/statistics/committee/:id/activities // Активность комитета
GET    /api/statistics/committee/:id/summary // Сводка по комитету

// Статистика мероприятия
GET    /api/statistics/event/:id          // Общая статистика мероприятия  
GET    /api/statistics/event/:id/top-delegates // Лучшие делегаты мероприятия
GET    /api/statistics/event/:id/committees-comparison // Сравнение комитетов

// Экспорт и отчеты
POST   /api/statistics/generate-reports   // Генерация индивидуальных отчетов
GET    /api/statistics/export/:format     // Экспорт статистики (CSV, PDF)
POST   /api/statistics/email-reports      // Отправка отчетов на email участникам
```

#### 16.2.15 Презентационный интерфейс

```javascript
// Группа: Presentation Interface

// Данные для публичного дисплея
GET    /api/presentation/:committeeId     // Все данные для дисплея
GET    /api/presentation/:committeeId/session-status // Статус сессии
GET    /api/presentation/:committeeId/current-speaker // Текущий выступающий  
GET    /api/presentation/:committeeId/timers // Состояние таймеров
GET    /api/presentation/:committeeId/voting // Информация о голосовании
GET    /api/presentation/:committeeId/quorum // Статус кворума

// Управление отображением
PUT    /api/presentation/:committeeId/update // Обновление отображаемой информации
POST   /api/presentation/:committeeId/announce // Срочное объявление
PUT    /api/presentation/:committeeId/highlight // Выделение важной информации
POST   /api/presentation/:committeeId/emergency // Экстренное уведомление

// Настройки презентации  
PUT    /api/presentation/:committeeId/settings // Настройки дисплея
GET    /api/presentation/:committeeId/settings // Текущие настройки дисплея
```

#### 16.2.16 Экспорт данных

```javascript
// Группа: Data Export

// Экспорт для администратора
GET    /api/export/event/:id/csv          // CSV экспорт всех действий мероприятия
GET    /api/export/event/:id/full-report  // Полный отчет о мероприятии
GET    /api/export/committee/:id/csv      // CSV экспорт действий комитета
GET    /api/export/committee/:id/statistics // Экспорт статистики комитета

// Специализированные экспорты
GET    /api/export/committee/:id/resolutions // Экспорт всех резолюций
GET    /api/export/committee/:id/voting-records // Экспорт результатов голосований
GET    /api/export/committee/:id/attendance // Экспорт данных посещаемости
GET    /api/export/committee/:id/messaging-stats // Экспорт статистики переписки

// Форматы экспорта
GET    /api/export/:type/:id/pdf          // PDF формат
GET    /api/export/:type/:id/excel        // Excel формат  
GET    /api/export/:type/:id/json         // JSON формат для интеграций
```

### 16.3 WebSocket События - детальная спецификация

#### 16.3.1 События реального времени по категориям

```javascript
// Критичные события для всех участников
const criticalEvents = {
  // Управление сессиями
  'session-started': {sessionId, startedAt, mode},
  'session-ended': {sessionId, endedAt, duration},  
  'session-mode-changed': {sessionId, newMode, previousMode, settings},
  
  // Голосования
  'voting-started': {votingId, subject, votingType, majorityRequired},
  'voting-completed': {votingId, results, passed},
  'vote-cast': {votingId, country, anonymized: true}, // без деталей голоса
  'voting-progress': {votingId, totalVotes, expectedVotes, percentage},
  
  // Таймеры  
  'timer-started': {sessionId, timerType, duration, purpose},
  'timer-update': {sessionId, timerType, remainingTime, status},
  'timer-warning': {sessionId, timerType, warningLevel}, // 30s, 10s
  'timer-expired': {sessionId, timerType, expiredAt},
  'timer-paused': {sessionId, timerType, pausedAt},
  'timer-resumed': {sessionId, timerType, resumedAt},
  
  // Выступающие
  'speaker-changed': {sessionId, currentSpeaker, country, timeAlloted},
  'speaker-list-updated': {sessionId, speakerList, nextSpeakers},
  'speaker-time-extended': {sessionId, speaker, additionalTime},
  
  // Кворум и присутствие
  'quorum-status-changed': {sessionId, hasQuorum, presentCount, requiredCount},
  'attendance-updated': {sessionId, presentCountries, absentCountries}
};

// События для президиума
const presidiumEvents = {
  // Документы
  'document-submitted': {documentType, documentId, author, submittedAt},
  'position-paper-uploaded': {documentId, country, version},
  
  // Коалиции и резолюции  
  'coalition-formed': {coalitionId, head, members, committeeId},
  'coalition-invitation-sent': {coalitionId, invitedCountry, invitedBy},
  'resolution-submitted': {resolutionId, coalitionId, title, submittedAt},
  
  // Поправки
  'amendment-submitted': {amendmentId, resolutionId, author, actionType},
  'amendment-coauthor-invited': {amendmentId, invitedCountry, invitedBy},
  
  // Процедурные вопросы
  'procedural-motion-submitted': {motionId, author, motionType, priority},
  'question-submitted': {questionId, author, questionType, target},
  
  // Статистика
  'statistics-updated': {committeeId, updatedDelegates, timestamp},
  'ranking-changed': {committeeId, newRankings, significantChanges}
};

// События для делегатов
const delegateEvents = {
  // Приглашения и уведомления
  'coalition-invitation': {coalitionId, fromCountry, coalitionName, deadline},
  'coauthor-invitation': {documentType, documentId, fromCountry, deadline},
  'message-received': {messageId, senderCountry, messageType, priority},
  'official-message': {messageId, fromPresidium, subject, requiresAcknowledgment},
  
  // Опросы и gossip
  'poll-created': {pollId, title, deadline, isAnonymous},
  'poll-reminder': {pollId, title, timeRemaining},
  'gossip-message': {gossipId, content, timestamp, isAnonymous: true},
  
  // Результаты модерации
  'document-review-completed': {documentId, decision, comments, nextSteps},
  'resolution-review-completed': {resolutionId, decision, comments, canResubmit},
  'amendment-review-completed': {amendmentId, decision, comments, votingScheduled},
  
  // Голосования
  'voting-reminder': {votingId, subject, deadline, hasVoted: false},
  'voting-call': {votingId, yourTurn: true}, // для поименного голосования
  
  // Процедурные уведомления  
  'motion-decision': {motionId, decision, comments, votingScheduled},
  'question-answered': {questionId, response, answeredBy},
  'right-of-reply-scheduled': {questionId, scheduledTime, duration}
};
```

#### 16.3.2 Организация WebSocket комнат

```javascript

const socketRooms = {
  // Основные комнаты
  committee: `committee-${committeeId}`,      // Все участники комитета
  presidium: `presidium-${committeeId}`,      // Только президиум
  delegates: `delegates-${committeeId}`,      // Только делегаты
  session: `session-${sessionId}`,            // Участники активной сессии
  presentation: `presentation-${committeeId}`, // Публичный дисплей
  
  // Специализированные комнаты
  voting: `voting-${votingId}`,               // Участники конкретного голосования
  coalition: `coalition-${coalitionId}`,       // Участники коалиции
  group: `group-${groupId}`,                  // Участники групповой переписки
  reconciliation: `reconciliation-${committeeId}`, // Согласительная комиссия
  
  // Административные комнаты
  admin: `admin-${eventId}`,                  // Администраторы мероприятия
  monitoring: `monitoring-${eventId}`         // Системный мониторинг
};
```

#### 16.3.3 Обработка переподключений и восстановление состояния

```javascript

const reconnectionLogic = {
  onReconnect: async (socket, userId, committeeId) => {
    // Определение роли пользователя
    const userRole = await getUserRole(userId);
    
    // Восстановление подписок на комнаты
    await rejoinAppropriateRooms(socket, userRole, committeeId);
    
    // Получение текущего состояния
    const currentState = await getCurrentState(committeeId, userRole);
    
    // Отправка восстановленного состояния
    socket.emit('state-restored', {
      session: currentState.session,
      voting: currentState.activeVoting,
      timers: currentState.timers,
      speaker: currentState.currentSpeaker,
      quorum: currentState.quorum,
      userSpecific: await getUserSpecificState(userId, userRole)
    });
    
    // Проверка пропущенных критичных событий
    const missedEvents = await getMissedCriticalEvents(userId, socket.lastSeen);
    if (missedEvents.length > 0) {
      socket.emit('missed-events', missedEvents);
    }
  }
};
```

## 17. Нефункциональные требования

### 17.1 Производительность

* Время отклика API: не более **2-3 секунд** (с учетом нагрузки до 500 пользователей)
* WebSocket задержка: не более **2-3 секунд**
* Поддержка **500 одновременных пользователей**
* Обработка файлов: загрузка документов до 10MB за 30 секунд
* Генерация статистики: не более 5 секунд для комитета из 50 участников

### 17.2 Надежность

* **Автоматическое восстановление WebSocket соединений** с экспоненциальным backoff
* **Дублирование критических данных**: голоса сохраняются в трех местах (основная БД, кэш, файл)
* **Система резервного копирования MongoDB** каждые 30 минут во время активных мероприятий
* **Журналирование всех действий** пользователей для возможности восстановления состояния
* **Автоматическая проверка целостности данных** каждые 15 минут

### 17.3 Безопасность и аутентификация

* **HTTPS для всех соединений** с принудительным перенаправлением
* **JWT токены** с истечением на время мероприятия + 24 часа буферное время
* **Только одна активная сессия** на пользователя (кроме администратора)
* **Валидация всех входных данных** с использованием библиотеки Joi
* **Rate limiting** для API endpoints: 100 запросов в минуту на пользователя
* **Хеширование паролей** с использованием bcrypt (12 rounds)

### 17.4 Масштабируемость

* **Микросервисная архитектура** позволяет горизонтальное масштабирование отдельных компонентов
* **Кэширование часто запрашиваемых данных** (статистика, настройки комитетов)
* **Индексы MongoDB** для всех часто запрашиваемых полей
* **Сжатие WebSocket сообщений** для экономии трафика
* **Пагинация** для больших списков (история сообщений, активности)

## 18. Пункты для дальнейшей проработки

### 18.1 Неопределенности в бизнес-процессах (принятые решения для MVP)

#### 18.1.1 Временные регламенты в неформальных дебатах

**Принятое решение для MVP:**

* В неформальных дебатах под председательством устанавливается только общий таймер
* Индивидуальные ограничения на выступления отсутствуют
* Президиум контролирует баланс участия через управление предоставлением слова

#### 18.1.2 Обработка одновременных процедурных предложений

**Принятое решение для MVP:**

* Процедурные предложения обрабатываются в очереди по времени сервера (timestamp)
* При одновременной подаче (в пределах одной секунды) применяется алфавитный порядок стран
* Президиум имеет право изменить порядок рассмотрения по важности

#### 18.1.3 Приоритеты при конфликте процедур

**Принятая иерархия для MVP:**

```javascript

const procedurePriority = {
  1: "Активное голосование (не может быть прервано)",
  2: "Вопрос личной привилегии",
  3: "Процедурные предложения высшего приоритета",
  4: "Смена режимов дебатов", 
  5: "Управление списками выступающих",
  6: "Административные действия"
};
```

#### 18.1.4 Управление правами продления речи

**Принятое решение для MVP:**

* Право продления устанавливается в начальном регламенте процедурным предложением
* Голосование о продлении инициируется автоматически по запросу выступающего
* Максимально одно продление на делегата за выступление
* Время продления - 50% от первоначального времени

### 18.2 Технические решения для неопределенных сценариев

#### 18.2.1 Обработка технических сбоев во время критических процедур

**Принятые правила для MVP:**

**Во время голосования:**

* Автоматическое сохранение каждого голоса в момент подачи
* При сбое системы - восстановление из сохраненных данных
* Если восстановление невозможно - перезапуск голосования с уведомлением участников

**Во время выступления с таймером:**

* При сбое таймера - фиксация времени сбоя в логах
* Компенсация потерянного времени рассчитывается автоматически
* Президиум получает рекомендацию по корректировке времени

#### 18.2.2 Управление множественными ролями президиума

**Принятое решение для MVP:**

* Все члены президиума имеют равные права в системе
* При конфликтующих действиях - система фиксирует последнее действие
* Журналирование всех действий с указанием конкретного члена президиума
* В случае спорных ситуаций - ручное разрешение через администратора

### 18.3 Упрощения архитектуры для MVP

#### 18.3.1 Согласительная комиссия

**Упрощения в реализации:**

* Базовая изоляция участников через интерфейсные ограничения (без физической изоляции системы)
* Простой механизм создания документа без сложных инструментов коллаборации
* Ограниченные возможности по формированию состава (не более 2 итераций)

#### 18.3.2 Анонимность в gossip-системе

**Упрощенный подход:**

* Серверная анонимизация без криптографической защиты
* Логи содержат связь сообщения с автором для модерации
* Базовая фильтрация контента без ИИ-анализа

#### 18.3.3 Статистика и аналитика

**Ограничения MVP:**

* Статистика рассчитывается в реальном времени без исторической аналитики
* Базовые алгоритмы ранжирования без машинного обучения
* Экспорт только в стандартных форматах (CSV, PDF)

### 18.4 Отложенные функции для версии 2.0

#### 18.4.1 Расширенные возможности коллаборации

* Встроенный текстовый редактор с real-time коллаборацией для резолюций
* Система комментариев к документам с возможностью обсуждения
* Интеграция с внешними редакторами (Google Docs, Microsoft Office Online)

#### 18.4.2 Расширенная аналитика и ИИ

* Анализ качества выступлений и документов
* Предиктивная аналитика участия делегатов
* Автоматические рекомендации по улучшению процедур

#### 18.4.3 Мобильное приложение

* Нативные приложения для iOS и Android
* Оффлайн-режим с синхронизацией при подключении
* Push-уведомления для критичных событий

#### 18.4.4 Интеграции с внешними системами

* Экспорт в системы управления мероприятиями
* Интеграция с календарными системами (Google Calendar, Outlook)
* API для сторонних разработчиков

#### 18.4.5 Расширенная система прав доступа

* Детальные роли президиума с различными полномочиями
* Временные роли и делегирование прав
* Система апрувалов для критичных действий

## 19. Критерии приемки MVP

### 19.1 Функциональные критерии

#### 19.1.1 Система ролей и аутентификации

* ✅ **QR-аутентификация работает**: делегаты могут войти по QR-коду и привязать email
* ✅ **Единая активная сессия**: новый логин завершает предыдущую сессию
* ✅ **Роли функционируют корректно**: админ, 4 роли президиума, 3 типа делегатов
* ✅ **Реактивация QR**: президиум может восстановить доступ для страны

#### 19.1.2 Коалиции и резолюции

* ✅ **Создание коалиций**: инициация, приглашения, подтверждения работают
* ✅ **Загрузка резолюций**: только главы активных коалиций могут загружать
* ✅ **Модерация**: президиум может принимать/отклонять с комментариями
* ✅ **Голосование по резолюциям**: в порядке подачи, с правильным подсчетом большинства

#### 19.1.3 Система поправок

* ✅ **Все типы поправок**: исключение, изменение, добавление работают корректно
* ✅ **Приоритизация**: автоматическая сортировка по пунктам и радикальности
* ✅ **Поправки второго порядка**: президиум может редактировать поправки во время голосования
* ✅ **Интеграция**: принятые поправки автоматически вносятся в резолюцию

#### 19.1.4 Голосования

* ✅ **Простое голосование**: только общие результаты без детализации
* ✅ **Поименное голосование**: вызов по алфавиту, пропуски, принудительный выбор в конце
* ✅ **Право вето**: работает только для постоянных членов СБ
* ✅ **Подсчет большинства**: правильное вычисление с исключением воздержавшихся

#### 19.1.5 Режимы дебатов и таймеры

* ✅ **Все режимы дебатов**: формальные, модерируемые, немодерируемые, неформальная консультация
* ✅ **Система таймеров**: сессионный, выступающего, до 6 дополнительных работают одновременно
* ✅ **Передача слова**: уникальная цепочка в неформальной консультации
* ✅ **Управление временем**: пауза, продление, передача остатка следующему

#### 19.1.6 Процедурные предложения и вопросы

* ✅ **Иерархия вопросов**: 7 типов с правильными приоритетами
* ✅ **Процедурные предложения**: по приоритетам, поддержка, очередь рассмотрения
* ✅ **Вопрос личной привилегии**: единственный тип через систему, прерывает любые процедуры
* ✅ **Право на ответ**: письменный запрос, планирование, ограничение времени

#### 19.1.7 Документооборот

* ✅ **Позиционные письма**: загрузка, модерация, версионирование, доработка после дедлайна
* ✅ **Публичные документы**: загрузка президиумом, доступ делегатам в любое время
* ✅ **Поддержка форматов**: PDF и Word документы обрабатываются корректно

#### 19.1.8 Дипломатическая переписка

* ✅ **Двусторонние сообщения**: приватная переписка между любыми делегатами
* ✅ **Групповые сообщения**: создание с одобрения президиума, автоматический доступ президиума
* ✅ **Gossip-система**: полная анонимность, модерация неуместного контента
* ✅ **Опросы**: создание президиумом, анонимные/открытые режимы

#### 19.1.9 Согласительная комиссия

* ✅ **Автоматическая активация**: при отклонении всех резолюций
* ✅ **Формирование состава**: назначение председателя и членов президиумом
* ✅ **Создание документа**: председатель загружает итоговый документ
* ✅ **Повторные попытки**: новый состав при отклонении документа комиссии

#### 19.1.10 Статистика и рейтинг

* ✅ **Все метрики учитываются**: речь, голосования, документы, процедуры, коммуникация
* ✅ **Расчет баллов**: формула работает корректно с правильными весами
* ✅ **Real-time обновления**: рейтинги обновляются после каждого действия
* ✅ **Отображение**: президиум видит рейтинги, делегаты - только на результат не влияющую информацию

#### 19.1.11 Презентационный интерфейс

* ✅ **Публичный дисплей**: отображает все критичные данные в реальном времени
* ✅ **Синхронизация**: изменения в системе мгновенно отражаются на дисплее
* ✅ **Экстренные уведомления**: система объявлений работает для всех участников

### 19.2 Нефункциональные критерии

#### 19.2.1 Производительность и масштабируемость

* ✅ **500+ одновременных пользователей**: система работает стабильно под полной нагрузкой
* ✅ **Время отклика API**: все endpoints отвечают за 2-3 секунды
* ✅ **WebSocket задержки**: real-time события доставляются за 2-3 секунды
* ✅ **Обработка файлов**: документы до 10MB загружаются и обрабатываются за 30 секунд

#### 19.2.2 Надежность и восстановление

* ✅ **Автоматическое переподключение**: WebSocket соединения восстанавливаются без потери данных
* ✅ **Сохранение состояния**: данные сессий корректно сохраняются и восстанавливаются
* ✅ **Резервное копирование**: автоматические бэкапы создаются и могут быть восстановлены
* ✅ **Журналирование**: все критичные действия фиксируются с возможностью аудита

#### 19.2.3 Безопасность

* ✅ **QR-деактивация**: токены корректно деактивируются после привязки email
* ✅ **Единственная сессия**: система корректно завершает старые сессии при новом входе
* ✅ **Валидация данных**: все пользовательские вводы проверяются на корректность
* ✅ **Rate limiting**: система защищена от чрезмерных запросов

#### 19.2.4 Пользовательский интерфейс

* ✅ **Адаптивность**: все интерфейсы корректно работают на мобильных устройствах
* ✅ **Usability**: интерфейсы интуитивно понятны для всех типов пользователей
* ✅ **Real-time обновления**: изменения отображаются мгновенно без обновления страницы

### 19.3 Интеграционные тесты

#### 19.3.1 Полные сценарии использования

* ✅ **Полный цикл мероприятия**: от создания до завершения с получением статистики
* ✅ **Сценарий резолюции**: создание коалиции → загрузка → модерация → голосование → поправки → итоговый документ
* ✅ **Сценарий согласительной комиссии**: отклонение резолюций → создание комиссии → новый документ → голосование
* ✅ **Стресс-тест голосования**: 50+ участников голосуют одновременно без потери данных